<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
    <Appenders>
        <Console name="stdout" target="SYSTEM_OUT">
            <PatternLayout
                pattern="%style{%d{ISO8601}}{black} %highlight{%-5level }[%style{%t}{bright,blue}] %style{%C{1.}}{bright,yellow}: %msg%n%throwable" />
        </Console>
        
        <Kafka name="Kafka" topic="log4j-topic">
			<PatternLayout 
				pattern="%style{%d{ISO8601}}{black} %highlight{%-5level }[%style{%t}{bright,blue}] %style{%C{1.}}{bright,yellow}: %msg%n%throwable" />	        
            <Property name="bootstrap.servers">localhost:9092</Property>
	    </Kafka>
	    
	    <Async name="AsyncKafka">
		  <!-- The Kafka appender is synchronous and will block until the record has been acknowledged by the Kafka server, 
		  timeout for this can be set with the timeout.ms property (defaults to 30 seconds). 
		  Wrap with Async appender to log asynchronously -->
	      <AppenderRef ref="Kafka"/>
	    </Async>
    </Appenders>

    <Loggers>
        <Root level="info">
            <AppenderRef ref="stdout" />
            <AppenderRef ref="AsyncKafka" />
        </Root>
        
        <!--Skip messages generated by the Kafka appender itself -->
        <Logger name="kafka" level="INFO"> <!-- level="OFF" -->
			<!-- Matches only INFO level -->
			<!--<LevelRangeFilter minLevel="INFO" maxLevel="INFO" onMatch="ACCEPT" onMismatch="DENY"/>-->
        </Logger>
        <Logger name="org.apache.kafka" level="INFO">
			<!-- Matches only INFO level -->
			<!--<LevelRangeFilter minLevel="INFO" maxLevel="INFO" onMatch="ACCEPT" onMismatch="DENY"/>-->
        </Logger>
    </Loggers>

</Configuration>
